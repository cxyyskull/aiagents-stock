# 主力选股功能 - 快速开始指南

## ✅ 已完成的功能模块

### 核心模块
1. **main_force_selector.py** - 数据获取和筛选
   - 使用pywencai获取主力资金数据
   - 智能筛选算法
   - 数据格式化

2. **main_force_analysis.py** - AI分析整合
   - 整合三大分析师团队
   - 资深研究员综合决策
   - 完整的分析流程

3. **main_force_ui.py** - Web界面
   - 参数配置界面
   - 结果展示
   - 数据导出

4. **app.py** - 主应用集成
   - 添加导航按钮
   - 路由配置

### 文档
5. **主力选股功能说明.md** - 详细使用手册
6. **test_main_force.py** - 功能测试脚本

## 🚀 快速开始

### 步骤1: 测试功能
```bash
# 运行测试脚本
python test_main_force.py
```

测试内容：
- ✅ 模块导入检查
- ✅ 数据获取功能
- ✅ 筛选功能
- ✅ API配置检查

### 步骤2: 启动系统
```bash
streamlit run app.py
```

### 步骤3: 使用主力选股
1. 在侧边栏点击 **🎯 主力选股**
2. 设置参数（时间区间、筛选数量等）
3. 点击 **🚀 开始主力选股**
4. 等待3-5分钟完成分析
5. 查看精选推荐结果

## 📊 功能特点

### 智能筛选
```
原始数据（100只）
    ↓ 涨幅过滤（<30%）
    ↓ 市值筛选（50-1300亿）
    ↓ ST股过滤
筛选结果（20-50只）
    ↓ 主力资金排序
候选股票（前20名）
```

### AI三维分析
```
💰 资金流向分析师
   ├─ 主力资金行为
   ├─ 资金流向趋势
   └─ 市场情绪判断

📊 行业板块分析师
   ├─ 行业发展前景
   ├─ 市场热点判断
   └─ 板块轮动分析

📈 财务基本面分析师
   ├─ 盈利能力评估
   ├─ 成长性分析
   └─ 财务健康度
```

### 综合决策
```
资深研究员AI
   ├─ 综合评估所有候选
   ├─ 精选3-5只最优标的
   ├─ 提供推荐理由
   ├─ 投资建议和风险提示
   └─ 目标价位和持仓建议
```

## 📋 参数说明

### 基础参数
| 参数 | 默认值 | 范围 | 说明 |
|-----|--------|------|------|
| 时间区间 | 最近3个月 | 自定义 | 主力资金统计周期 |
| 初步筛选 | 20只 | 10-50 | 候选股票数量 |
| 最终精选 | 5只 | 3-10 | 推荐标的数量 |

### 高级参数
| 参数 | 默认值 | 范围 | 说明 |
|-----|--------|------|------|
| 最大涨幅 | 30% | 10-100% | 过滤涨幅过高的股票 |
| 最小市值 | 50亿 | 10-500亿 | 市值下限 |
| 最大市值 | 1300亿 | 100-5000亿 | 市值上限 |
| AI模型 | deepseek-chat | - | 分析使用的模型 |

## 🎯 使用场景

### 1. 周末选股
**时机**: 每周日晚上
**参数**: 最近3个月，精选5只
**用途**: 为下周交易做准备

### 2. 月度调仓
**时机**: 每月初
**参数**: 最近6个月，精选8-10只
**用途**: 调整持仓结构

### 3. 热点捕捉
**时机**: 市场出现明显热点时
**参数**: 最近1个月，精选3只
**用途**: 抓住短期机会

## ⚠️ 注意事项

### 环境要求
```bash
# 必须安装
Python >= 3.8
Node.js >= 16.0（重要！pywencai依赖）

# Python包
pywencai >= 0.7.0
pandas
streamlit
deepseek
```

### 检查Node.js版本
```bash
node --version

# 如果低于16.0，需要升级
# Windows: 从nodejs.org下载最新版本
# Mac: brew install node
# Linux: nvm install 18
```

### API配置
确保.env文件中配置了：
```env
DEEPSEEK_API_KEY=your_api_key_here
EMAIL_ENABLED=true  # 如需邮件通知
```

## 🔍 常见问题

### Q: 数据获取失败？
**检查**:
- [ ] 网络连接正常
- [ ] Node.js版本 >= 16.0
- [ ] pywencai已正确安装

**解决**:
```bash
# 重新安装pywencai
pip uninstall pywencai
pip install pywencai --upgrade

# 检查Node.js
node --version
```

### Q: 分析时间太长？
**原因**: 候选股票太多

**优化**:
- 减少初步筛选数量（改为15只）
- 使用deepseek-chat模型（更快）
- 调整筛选条件减少候选数量

### Q: 推荐结果不理想？
**建议**:
- 调整时间区间（试试最近6个月）
- 放宽涨幅限制（改为40%）
- 多次运行对比结果
- 结合自己的投资逻辑

## 📈 最佳实践

### 1. 参数配置建议
```yaml
保守型:
  时间区间: 6个月
  最大涨幅: 20%
  市值范围: 100-1300亿
  精选数量: 3只

平衡型:
  时间区间: 3个月
  最大涨幅: 30%
  市值范围: 50-1300亿
  精选数量: 5只

激进型:
  时间区间: 1个月
  最大涨幅: 40%
  市值范围: 50-800亿
  精选数量: 8只
```

### 2. 使用流程
```
1. 周末运行主力选股
   ↓
2. 查看推荐结果和AI分析
   ↓
3. 深入研究前3名标的
   ↓
4. 查看实时K线和技术指标
   ↓
5. 周一开盘后择机建仓
   ↓
6. 加入实时监测，设置止盈止损
```

### 3. 风险控制
```
✅ 分散投资: 不超过3-5只股票
✅ 仓位控制: 单只不超过30%
✅ 止损设置: -8%到-10%
✅ 止盈目标: +15%到+20%
✅ 动态调整: 根据走势调整策略
```

## 📊 输出结果

### 统计数据
- 获取股票总数
- 筛选后数量
- 深度分析数量
- 最终推荐数量

### 推荐详情
每只股票包含：
- ✅ 推荐理由（3-5条）
- ✅ 投资亮点
- ✅ 风险提示
- ✅ 建议仓位
- ✅ 目标价位
- ✅ 投资周期
- ✅ AI详细分析报告

### 数据导出
- CSV格式候选列表
- 包含所有关键指标
- 可用于进一步分析

## 🎓 学习资源

### 相关文档
- 主力选股功能说明.md - 完整使用手册
- 资金流向功能说明.md - 资金分析原理
- 实时监测优化说明.md - 监测功能
- README.md - 系统总体说明

### 代码学习
- main_force_selector.py - 数据处理逻辑
- main_force_analysis.py - AI分析流程
- main_force_ui.py - 界面实现

## 🆘 获取帮助

### 运行测试
```bash
python test_main_force.py
```

### 查看日志
运行时终端会显示详细日志：
- 数据获取过程
- 筛选统计
- AI分析进度
- 错误信息

### 问题反馈
提供以下信息：
1. 错误截图
2. 终端日志
3. 使用的参数
4. 系统环境（Python版本、Node.js版本）

## ✨ 开始使用

```bash
# 1. 测试功能
python test_main_force.py

# 2. 启动系统
streamlit run app.py

# 3. 点击 🎯 主力选股

# 4. 开始分析
```

---

**祝您选股顺利，投资成功！** 🚀📈💰

