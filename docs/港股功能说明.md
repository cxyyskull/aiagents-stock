# 港股分析功能说明

## ✨ 功能概述

系统现已支持港股分析功能，可以对香港交易所上市的股票进行技术面和基本面分析。

## 📊 支持的功能

### ✅ 完全支持
1. **股票代码识别**
   - 支持1-5位数字代码（如：700, 9988, 01810）
   - 支持HK前缀格式（如：HK00700）
   - 自动规范化为5位标准格式

2. **基本信息获取**
   - 股票名称
   - 当前价格
   - 涨跌幅
   - 市盈率（PE）
   - 市净率（PB）
   - 市值

3. **历史数据获取**
   - 支持多个时间周期（1mo, 3mo, 6mo, 1y）
   - OHLCV数据（开盘、最高、最低、收盘、成交量）
   - 完整的历史K线数据

4. **技术指标计算**
   - 移动平均线（MA5, MA10, MA20, MA60）
   - 相对强弱指标（RSI）
   - MACD指标
   - 布林带（Bollinger Bands）
   - KDJ指标
   - 成交量指标

5. **AI智能分析**
   - 技术分析师：图表形态、趋势判断
   - 风险管理师：风险识别与控制
   - 基本面分析师：公司价值评估（含21项财务指标）⭐️ 新增
   - 团队综合决策

### ✅ 完全支持（新增）
1. **财务指标数据**
   - 基本每股收益、每股净资产
   - 每股股息TTM、派息比率、股息率TTM
   - 每股经营现金流
   - 总市值、港股市值
   - 营业总收入、营业收入环比增长
   - 销售净利率、净利润、净利润环比增长
   - ROE（股东权益回报率）
   - ROA（总资产回报率）
   - 市盈率、市净率
   - 法定股本、已发行股本、每手股数
   - 数据来源：东方财富（akshare接口）

### ❌ 暂不支持
1. **资金流向分析**（仅支持A股）
2. **市场情绪分析**（仅支持A股）
3. **新闻公告分析**（仅支持A股）

## 🔧 使用方法

### 代码格式示例
```python
# 方式1：简短格式
700          # 腾讯控股
9988         # 阿里巴巴-SW
1810         # 小米集团-W

# 方式2：标准5位格式
00700        # 腾讯控股
09988        # 阿里巴巴-SW
01810        # 小米集团-W

# 方式3：HK前缀格式
HK00700      # 腾讯控股
HK09988      # 阿里巴巴-SW
HK01810      # 小米集团-W
```

### 在系统中使用
1. **单个分析**
   - 在输入框输入港股代码（如：700 或 00700）
   - 点击"开始分析"
   - 查看AI团队分析报告

2. **批量分析**
   - 支持混合分析A股、港股、美股
   - 例如：`000001, 00700, AAPL`

3. **分析师选择**
   - ✅ 推荐选择：技术分析师、基本面分析师（含21项财务指标）、风险管理师
   - ❌ 不推荐：市场情绪分析师、新闻公告分析师（港股不支持）

## 📈 热门港股代码

| 代码 | 公司名称 | 行业 |
|------|----------|------|
| 00700 | 腾讯控股 | 互联网科技 |
| 09988 | 阿里巴巴-SW | 电商/云计算 |
| 01810 | 小米集团-W | 智能手机/IoT |
| 00388 | 香港交易所 | 金融服务 |
| 00939 | 建设银行 | 银行 |
| 01024 | 快手-W | 短视频平台 |
| 09618 | 京东集团-SW | 电商 |
| 03690 | 美团-W | 本地生活服务 |
| 02331 | 李宁 | 体育用品 |
| 01299 | 友邦保险 | 保险 |

## 💡 使用建议

### 适合场景
- ✅ 技术面分析（K线、指标、形态）
- ✅ 基本面分析（21项财务指标）⭐️ 新增
- ✅ 短期交易策略制定
- ✅ 中长期投资决策
- ✅ 价格趋势判断
- ✅ 风险评估
- ✅ 价值投资分析

### 建议补充
- 💡 行业对比（建议参考行业报告）
- 💡 深度研究（建议结合年报和行业分析）

## 🔍 技术实现

### 数据来源
- **行情数据**：AKShare - `stock_hk_spot_em()`
- **历史数据**：AKShare - `stock_hk_hist()`
- **财务指标**：AKShare - `stock_hk_financial_indicator_em()` ⭐️ 新增
- **技术指标**：TA-Lib库计算

### 代码位置
- **主要实现**：`stock_data.py`
  - `_is_hk_stock()` - 港股识别
  - `_normalize_hk_code()` - 代码规范化
  - `_get_hk_stock_info()` - 基本信息获取
  - `_get_hk_stock_data()` - 历史数据获取
  - `_get_hk_financial_data()` - 财务数据获取

## 📊 支持的财务指标（21项）

### 盈利能力指标
- 基本每股收益（EPS）
- 净利润
- 净利润环比增长率
- 销售净利率
- ROE（股东权益回报率）
- ROA（总资产回报率）

### 营运能力指标
- 营业总收入
- 营业收入环比增长率
- 每股经营现金流

### 偿债能力指标
- 每股净资产
- 总资产

### 市场表现指标
- 市盈率（P/E）
- 市净率（P/B）
- 总市值
- 港股市值

### 分红指标
- 每股股息TTM
- 股息率TTM
- 派息比率

### 股本结构
- 法定股本
- 已发行股本
- 每手股数

## 🚀 后续优化方向

1. **数据源扩展**
   - ✅ 已完成：财务指标数据（21项）
   - 待开发：完整财务报表（资产负债表、利润表、现金流量表）
   - 待开发：港股通资金流向

2. **功能增强**
   - 港股特有指标分析
   - 恒生指数关联分析
   - 南下资金追踪

3. **用户体验**
   - 港股交易时间提示
   - 货币汇率转换
   - 港股通标的筛选

## 📝 注意事项

1. **交易时间**
   - 港股交易时间与A股不同
   - 上午：9:30-12:00
   - 下午：13:00-16:00
   - 注意节假日差异

2. **货币单位**
   - 报价单位：港币（HKD）
   - 与人民币汇率需要转换

3. **数据延迟**
   - 免费数据可能有延迟
   - 建议以实盘为准

4. **投资风险**
   - 港股T+0交易，风险较大
   - 涨跌幅无限制
   - 请谨慎投资

## 📞 技术支持

如遇到港股分析相关问题，请：
1. 查看系统日志输出
2. 运行测试脚本：`python test_hk_stock.py`
3. 联系技术支持：ws3101001@126.com

---

**最后更新**：2025年10月10日  
**版本**：v1.0  
**状态**：✅ 已完成测试

