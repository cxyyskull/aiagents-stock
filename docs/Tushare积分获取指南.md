# Tushare积分获取指南

## 📋 问题说明

在使用智能盯盘的数据源降级功能时，您可能会看到以下提示：

```
Tushare获取失败: 抱歉，您没有接口访问权限
⚠️ Tushare资金流向接口需要120积分，当前积分不足
```

这是因为Tushare的某些接口需要**积分权限**才能访问。

---

## 🎯 Tushare积分体系

### 接口积分要求

| 接口类型 | 所需积分 | 说明 |
|---------|---------|------|
| **股票列表** | 0 | 免费 |
| **日线行情** | 0-120 | 基础行情免费，高级字段需积分 |
| **分钟线** | 2000 | 需要较高积分 |
| **资金流向** | 120 | ⭐ 智能盯盘使用 |
| **财务数据** | 不同 | 根据字段不同 |

智能盯盘主要使用：
- ✅ **日线行情**（0积分）- 作为降级方案
- ⚠️ **资金流向**（120积分）- 可选，没有也能运行

---

## 💡 快速获取120积分

### 方法一：完善个人信息（+100积分）⭐ 推荐

1. **登录Tushare**
   - 访问：https://tushare.pro/
   - 登录您的账号

2. **进入个人中心**
   - 点击右上角用户名
   - 选择"个人中心"

3. **完善资料**
   - 填写真实姓名
   - 填写手机号并验证
   - 填写邮箱并验证
   - 完善职业信息
   - **一次性获得100积分**

### 方法二：每日签到（每天+1积分）

1. **登录后签到**
   - 每天访问 https://tushare.pro/
   - 点击"每日签到"按钮
   - 获得1积分

2. **累积积分**
   - 连续签到30天 = 30积分
   - 配合方法一，总计130积分（够用！）

### 方法三：社区互动

1. **发表文章**
   - 分享使用经验
   - 数据分析案例
   - 获得5-20积分/篇

2. **回答问题**
   - 在社区帮助其他用户
   - 获得1-5积分/次

3. **推荐新用户**
   - 邀请好友注册
   - 获得积分奖励

---

## 🚀 推荐方案（最快）

### 5分钟获取120积分

**第1步：完善个人信息（3分钟）**
```
1. 填写姓名
2. 验证手机号
3. 验证邮箱
4. 填写职业
→ 立即获得100积分
```

**第2步：连续签到20天**
```
每天登录签到 × 20天 = 20积分
100 + 20 = 120积分（满足要求！）
```

**或者：发表1篇文章（10分钟）**
```
1. 写一篇使用心得
2. 分享到社区
3. 获得10-20积分
→ 100 + 20 = 120积分（完成！）
```

---

## 🔍 查看当前积分

1. **登录Tushare**
   - 访问：https://tushare.pro/user/token

2. **查看积分余额**
   ```
   页面会显示：
   - 当前积分
   - 可用接口
   - 积分明细
   ```

3. **检查接口权限**
   - 查看"资金流向"是否可用
   - 如果显示"不可用"，说明积分不足

---

## ⚙️ 智能盯盘的降级策略

### 当前实现的多层降级

```
Level 1: AKShare（主数据源）
   ↓ 失败
Level 2: Tushare基础接口（免费，0积分）
   ├─ daily_basic（基础日线）
   ├─ pro_bar（社区版）
   └─ stock_basic（股票列表）
   ↓ 成功 → 返回行情数据（无资金流向）
   ↓ 失败
Level 3: Tushare高级接口（需120积分）
   └─ moneyflow（资金流向）
   ↓ 成功 → 返回完整数据
   ↓ 失败 → 返回部分数据（无资金流向）
```

### 没有120积分的影响

| 功能 | 是否受影响 | 说明 |
|-----|----------|------|
| AI决策 | ✅ 正常 | 使用行情数据即可 |
| 实时行情 | ✅ 正常 | 使用免费接口 |
| 技术指标 | ✅ 正常 | 本地计算 |
| 主力资金 | ⚠️ 受限 | 缺少资金流向数据 |
| 自动交易 | ✅ 正常 | 不依赖资金流向 |
| 通知发送 | ✅ 正常 | 独立功能 |

**结论：没有120积分也能正常使用，只是缺少主力资金流向数据！**

---

## 📊 实际测试结果

### 场景一：0积分（仅Token）

```bash
# 日志输出
✅ Tushare备用数据源初始化成功
AKShare获取失败，尝试降级到Tushare
✅ Tushare降级成功（pro_bar接口），获取到数据
⚠️ Tushare资金流向接口需要120积分，当前积分不足

# 结果
- 行情数据：✅ 成功获取
- 技术指标：✅ 正常计算
- 主力资金：❌ 无数据
- AI决策：✅ 正常运行
```

### 场景二：120+积分

```bash
# 日志输出
✅ Tushare备用数据源初始化成功
AKShare获取失败，尝试降级到Tushare
✅ Tushare降级成功（基础接口），获取到数据
✅ Tushare降级成功，获取到资金流向

# 结果
- 行情数据：✅ 成功获取
- 技术指标：✅ 正常计算
- 主力资金：✅ 完整数据
- AI决策：✅ 更准确
```

---

## 🎓 Tushare积分详细规则

### 积分获取途径

| 方式 | 获得积分 | 频率 | 难度 |
|-----|---------|------|------|
| 完善个人信息 | +100 | 一次性 | ⭐ 简单 |
| 每日签到 | +1 | 每天 | ⭐ 简单 |
| 发表文章 | +5~20 | 不限 | ⭐⭐ 中等 |
| 回答问题 | +1~5 | 不限 | ⭐⭐ 中等 |
| 推荐新用户 | +10 | 不限 | ⭐⭐⭐ 较难 |
| 捐赠支持 | 不同 | 不限 | ⭐⭐⭐ 较难 |

### 积分使用规则

- ✅ 积分不会过期
- ✅ 一次获取永久有效
- ✅ 调用接口不扣积分
- ⚠️ 仅用于开通接口权限

### 积分查询方式

**方法一：网页查询**
```
https://tushare.pro/user/token
```

**方法二：API查询**
```python
import tushare as ts
ts.set_token('your_token')
pro = ts.pro_api()

# 查询积分（需要token）
print("当前积分:", pro.query('user', fields='id,nick,credits'))
```

---

## ❓ 常见问题

### Q1: 我填写了信息但没有得到100积分？

**A:** 需要完成以下所有项：
- ✅ 真实姓名
- ✅ 手机号验证
- ✅ 邮箱验证
- ✅ 职业信息
- ✅ 点击"提交"保存

### Q2: 签到在哪里？

**A:** 
1. 登录 https://tushare.pro/
2. 右上角会显示"每日签到"按钮
3. 点击即可获得1积分

### Q3: 积分够了为什么还是提示权限不足？

**A:** 
1. 退出重新登录Tushare官网
2. 检查积分是否真的到账
3. 等待5-10分钟，系统可能有延迟
4. 重新获取Token并更新.env配置

### Q4: 不想获取积分，有其他办法吗？

**A:** 
- ✅ 继续使用AKShare主数据源（大多数时候能用）
- ✅ 不配置Tushare Token（智能盯盘仍可正常运行）
- ⚠️ 但稳定性会降低（~70% vs ~95%）

### Q5: 积分会扣除吗？

**A:** 
- ❌ 不会！调用接口不扣积分
- ✅ 积分仅用于开通接口权限
- ✅ 一次获取，永久有效

---

## 🔧 配置建议

### 推荐配置（最佳体验）

```env
# .env配置
TUSHARE_TOKEN="your_token_here"  # 已获取120+积分
```

**优点：**
- ✅ 数据获取成功率95%+
- ✅ 包含主力资金流向
- ✅ AI决策更准确

### 最小配置（基础功能）

```env
# .env配置
TUSHARE_TOKEN="your_token_here"  # 0积分也可以
```

**优点：**
- ✅ 仍有降级保护
- ✅ 基础行情可获取
- ⚠️ 缺少资金流向

### 不配置（仅AKShare）

```env
# 不设置Tushare
```

**优点：**
- ✅ 无需注册Tushare
- ⚠️ 稳定性较低（~70%）

---

## 📚 相关链接

- **Tushare官网**: https://tushare.pro/
- **积分规则**: https://tushare.pro/document/1?doc_id=13
- **接口权限**: https://tushare.pro/document/1?doc_id=108
- **个人中心**: https://tushare.pro/user/token
- **积分获取**: https://tushare.pro/document/1?doc_id=13

---

## 💡 总结

### 建议操作步骤

**Step 1**: 完善Tushare个人信息（获得100积分）
**Step 2**: 连续签到20-30天（获得20-30积分）
**Step 3**: 总计120+积分，解锁所有功能
**Step 4**: 享受95%+的数据获取成功率！

### 如果不想获取积分

- ✅ 也可以正常使用智能盯盘
- ✅ AI决策、自动交易都不受影响
- ⚠️ 只是缺少主力资金流向数据
- ⚠️ 网络问题时降级效果打折扣

**我们仍然推荐获取120积分，提升系统稳定性！**

---

**更新时间**: 2025-10-25  
**版本**: v1.0

